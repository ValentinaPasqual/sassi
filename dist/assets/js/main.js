import"./modulepreload-polyfill-B5Qt9EMX.js";import{i as v}from"./initMap-KGyThJKI.js";import{l as E,p as N}from"./dataParser-DPL0y_Ss.js";function b(n){const e=document.querySelector('[data-content="project-title"]');e&&(e.textContent=n.project.projectTitle);const t=document.querySelector('[data-content="project-subtitle"]');t&&(t.textContent=n.project.projectSubtitle);const r=document.querySelector('[data-content="map-info-title"]');r&&(r.textContent=n.project.mapInfoTitle);const o=document.querySelector('[data-content="map-info-description"]');o&&(o.textContent=n.project.mapInfoDescription);const c=document.querySelector('[data-content="project-name"]');if(c){let l=null;for(let d=0;d<c.childNodes.length;d++)c.childNodes[d].nodeType===Node.TEXT_NODE&&(l=c.childNodes[d]);l&&(l.textContent="Il "+n.project.projectName)}const i=n.project.projectDescription.split("<br><br>"),a=document.querySelector('[data-content="project-description-1"]'),s=document.querySelector('[data-content="project-description-2"]');a&&i.length>0&&(a.textContent=i[0]),s&&i.length>1&&(s.textContent=i[1]),console.log("Contenuti aggiornati con successo")}async function z(n,e){try{const t="map";let r=document.getElementById(t);n.map||(console.warn("Configurazione della mappa mancante, utilizzo configurazione predefinita"),n.map={initialView:[45.9763,7.6586],initialZoom:8,tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n.map.containerId=t,console.log(`Inizializzazione mappa con container ID: "${t}"`);const o=v(n),c=o.map,i=o.markers,a=o.renderMarkers;e&&Array.isArray(e)?(console.log(`Aggiunti ${e.length} punti alla mappa`),a&&typeof a=="function"?a(e):console.warn("La funzione renderMarkers non è disponibile"),window.alpinismData=e):console.warn("Nessun dato valido trovato o formato dati non valido"),console.log("Mappa inizializzata con successo")}catch(t){console.error("Errore durante l'inizializzazione della mappa:",t);const r=document.querySelector(".map-container")||document.body,o=document.createElement("div");o.className="error-message p-4 bg-red-100 text-red-700 border border-red-300 rounded",o.textContent="Si è verificato un errore durante il caricamento della mappa. Ricarica la pagina per riprovare.",r.appendChild(o)}}function y(n){const e=n.filter(c=>c.in_evidence===!0);if(e.length===0)return null;const t=document.createElement("div");t.className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12";const r=document.createElement("h2");r.className="text-3xl font-bold text-gray-900 mb-8",r.textContent="Luoghi d'interesse",t.appendChild(r);const o=document.createElement("div");return o.className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",t.appendChild(o),e.forEach(c=>{const i=document.createElement("div");i.className="bg-white rounded-lg overflow-hidden shadow-lg border border-gray-200 card-hover transition duration-300";const a=document.createElement("div");a.className="h-48 overflow-hidden";const s=document.createElement("div");s.className="p-6";const l=document.createElement("div");l.className="flex justify-between items-center mb-2";const d=document.createElement("h3");d.className="text-xl font-bold",d.textContent=c.Name||"Luogo senza nome";const u=document.createElement("span");u.className="text-sm bg-indigo-100 text-indigo-800 px-2 py-1 rounded",u.textContent=c.Date||"",l.appendChild(d),c.Date&&l.appendChild(u),s.appendChild(l);const g=document.createElement("p");g.className="text-gray-600 mb-4",g.textContent=c.in_evidence_description||"",s.appendChild(g);const p=document.createElement("a");p.href=`#${c.id||""}`,p.className="text-indigo-600 font-medium hover:text-indigo-800 inline-flex items-center",s.appendChild(p),i.appendChild(s),o.appendChild(i)}),t}async function w(n){try{const e=document.getElementById("featured-locations-container");if(e){const t=y(n);t?(e.appendChild(t),console.log('Sezione "In evidenza sulla mappa" generata con successo')):console.log("Nessun elemento in evidenza trovato nei dati")}else{console.warn("Container per le località in evidenza non trovato (ID: featured-locations-container)");const t=document.querySelector(".map-container");if(t){const r=document.createElement("div");r.id="featured-locations-container",t.parentNode.insertBefore(r,t.nextSibling);const o=y(n);o&&(r.appendChild(o),console.log('Sezione "In evidenza sulla mappa" generata e inserita automaticamente'))}}}catch(e){console.error("Errore durante l'inizializzazione delle località in evidenza:",e)}}function j(n){const e={};n.forEach(i=>{if(i.storytelling_path&&typeof i.storytelling_path=="string"){const a=i.storytelling_path;e[a]||(e[a]=[]),e[a].push(i)}});const t=Object.keys(e);if(t.length===0)return null;const r=document.createElement("div");r.className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12";const o=document.createElement("h2");o.className="text-3xl font-bold text-gray-900 mb-8",o.textContent="Percorsi narrativi",r.appendChild(o);const c=document.createElement("div");return c.className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",r.appendChild(c),t.forEach(i=>{const a=e[i],s=document.createElement("div");if(s.className="bg-white rounded-lg overflow-hidden shadow-lg border border-gray-200 card-hover transition duration-300",a[0].image_url){const m=document.createElement("div");m.className="h-48 overflow-hidden";const h=document.createElement("img");h.src=a[0].image_url,h.alt=i,h.className="w-full h-full object-cover",m.appendChild(h),s.appendChild(m)}const l=document.createElement("div");l.className="p-6";const d=document.createElement("div");d.className="flex justify-between items-center mb-2";const u=document.createElement("h3");u.className="text-xl font-bold",u.textContent=i;const g=document.createElement("span");if(g.className="text-sm bg-indigo-100 text-indigo-800 px-2 py-1 rounded",g.textContent=`${a.length} elementi`,d.appendChild(u),d.appendChild(g),l.appendChild(d),a[0].storytelling_path_description){const m=document.createElement("p");m.className="text-gray-600 mb-4",m.textContent=a[0].storytelling_path_description,l.appendChild(m)}const p=document.createElement("div");p.className="mt-4 mb-4";const C=document.createElement("h4");C.className="text-sm font-medium text-gray-700 mb-2",C.textContent="Elementi inclusi:",p.appendChild(C);const x=document.createElement("ul");if(x.className="text-sm text-gray-600 pl-5 list-disc",a.slice(0,10).forEach(m=>{const h=document.createElement("li");h.textContent=m.Name||"Elemento senza nome",x.appendChild(h)}),a.length>10){const m=document.createElement("li");m.className="italic",m.textContent=`e altri ${a.length-10} elementi...`,x.appendChild(m)}p.appendChild(x),l.appendChild(p);const f=document.createElement("a");f.href=`pages/narrative.html?percorso=${encodeURIComponent(i)}`,f.rel="noopener noreferrer",f.className="text-indigo-600 font-medium hover:text-indigo-800 inline-flex items-center explore-path-button",f.textContent="Esplora percorso",l.appendChild(f),s.appendChild(l),c.appendChild(s)}),r}async function I(n){try{const e=document.getElementById("storytelling-paths-container");if(e){const t=j(n);t?(e.appendChild(t),console.log('Sezione "Percorsi narrativi" generata con successo')):console.log("Nessun percorso narrativo trovato nei dati")}else console.warn("Container per i percorsi narrativi non trovato (ID: storytelling-paths-container)")}catch(e){console.error("Errore durante l'inizializzazione dei percorsi narrativi:",e)}}document.addEventListener("DOMContentLoaded",async()=>{const n=await E(),e=await N();z(n,e),b(n),w(e),I(e)});
